<!DOCTYPE html>
<html style="font-size: 16px;" lang="en"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="Rent your own bicycle​">
    <meta name="description" content="">
    <title>Home</title>
    <link rel="stylesheet" href="css/nicepage.css" media="screen">
<link rel="stylesheet" href="css/index.css" media="screen">
    <script class="u-script" type="text/javascript" src="css/js/jquery.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="css/js/nicepage.js" defer=""></script>
    <meta name="generator" content="Nicepage 7.0.3, nicepage.com">
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
    <link id="u-page-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=ADLaM+Display:400">
    
    
    
    <style>
    .u-nav {
    display: flex;
    justify-content: center;
    align-items: center;
    list-style: none;
    padding: 0;
    margin: 0;
}
.u-nav-item {
    margin: 0 10px;
}
.u-nav-link {
    text-decoration: none;
    padding: 10px 20px;
    color: black;
}
.u-nav-link:hover {
    color: blue;
}
.hidden {
    display: none;
}
/* Flexbox container for logo and navigation */
.navbar {
    display: flex;
    justify-content: space-between; /* Space between logo and navigation links */
    align-items: center; /* Vertically center the items */
    padding: 10px 20px;
}

/* Adjust the logo if necessary */
.u-logo {
    margin-right: 20px; /* Adjust space between the logo and the nav */
    margin-left: -10px; /* Move the logo slightly to the left */
}
.u-nav {
    display: flex; /* Keep the nav links in a row */
    list-style: none;
    padding: 0;
    margin: 0;
}

/* Ensure the logo image does not collapse */
.u-logo-image {
    max-height: 100px; /* Adjust the height for better scaling */
    max-width: auto; /* Ensure the aspect ratio is maintained */
    object-fit: contain; /* Fit the image within its container */
    margin-top: 45px;
}

.popup {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.popup-content {
    background: white;
    padding: 20px;
    border-radius: 8px;
    max-width: 500px;
    width: 90%;
    text-align: center;
}

.popup-content h3 {
    margin-top: 0;
}

.popup-content ul {
    text-align: left;
    list-style: none;
    padding: 0;
}

.popup-content button {
    margin-top: 20px;
    padding: 10px 20px;
    background-color: #333;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

.popup-content button:hover {
    background-color: #555;
}
/* Info Section Styling */
.info-container {
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #6a11cb, #2575fc);
    color: white;
    padding: 50px 20px;
    height: 100vh;
    text-align: center;
    animation: fadeIn 2s ease-in-out;
}

.info-content {
    max-width: 700px;
    padding: 20px;
    border-radius: 15px;
    background: rgba(255, 255, 255, 0.1);
    box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
    backdrop-filter: blur(10px);
}

.info-content h1 {
    font-size: 2.5rem;
    margin-bottom: 20px;
    animation: slideInDown 1s ease-out;
}

.info-content p {
    font-size: 1.2rem;
    margin-bottom: 30px;
    animation: fadeIn 1.5s ease-in-out;
}

.info-buttons {
    display: flex;
    gap: 20px;
    justify-content: center;
    animation: zoomIn 1.5s ease-in-out;
}

.info-buttons .btn {
    padding: 15px 25px;
    font-size: 1rem;
    border: none;
    border-radius: 25px;
    cursor: pointer;
    transition: transform 0.3s ease, background-color 0.3s ease;
}

.learn-more {
    background-color: #ffffff;
    color: #2575fc;
}

.learn-more:hover {
    background-color: #f0f0f0;
    transform: scale(1.1);
}

.get-started {
    background-color: #2575fc;
    color: #ffffff;
}

.get-started:hover {
    background-color: #1a5dbb;
    transform: scale(1.1);
}

/* Animations */
@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes slideInDown {
    from {
        transform: translateY(-50px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

@keyframes zoomIn {
    from {
        transform: scale(0.8);
        opacity: 0;
    }
    to {
        transform: scale(1);
        opacity: 1;
    }
}

    </style>
    <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": "",
		"logo": "css/images/universite-gustave-eiffel.png"
}</script>
    <meta name="theme-color" content="#478ac9">
    <meta property="og:title" content="Home">
    <meta property="og:type" content="website">
  <meta data-intl-tel-input-cdn-path="intlTelInput/"></head>
  <body data-home-page="Home.html" data-home-page-title="Home" data-path-to-root="./" data-include-products="false" class="u-body u-xl-mode" data-lang="en">
  <header class="u-clearfix u-grey-5 u-header u-header" id="sec-4073">
  <div class="u-clearfix u-sheet u-valign-middle-xs u-sheet-1">


<nav class="navbar">
     <a href="#" class="u-image u-logo u-image-1" data-image-width="300" data-image-height="150">
    <img src="css/images/universite-gustave-eiffel.png" class="u-logo-image u-logo-image-1" alt="Université Gustave Eiffel Logo" style="width: auto; height: auto;">
</a>
    <ul class="u-nav u-unstyled u-nav-1">
        <li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-grey-75 u-text-hover-palette-2-base" href="index.html" style="padding: 10px 20px; margin-left: 80px;">Home</a></li>
        <li class="u-nav-item" id="profile-link" style="display: none;"><a class="u-button-style u-nav-link u-text-active-grey-75 u-text-hover-palette-2-base" href="Sales.html" style="padding: 10px 20px;">Sales</a></li>
        <li class="u-nav-item" id="Bikes-link" style="display: none;"><a class="u-button-style u-nav-link u-text-active-grey-75 u-text-hover-palette-2-base" href="MyBikes.html" style="padding: 10px 20px;">My Bikes</a></li>
        <li class="u-nav-item" id="posts-link" style="display: none;"><a class="u-button-style u-nav-link u-text-active-grey-75 u-text-hover-palette-2-base" href="Annonces.html" style="padding: 10px 20px;">My Posts</a></li>
        <li class="u-nav-item" id="rentals-link" style="display: none;"><a class="u-button-style u-nav-link u-text-active-grey-75 u-text-hover-palette-2-base" href="MyRentals.html" style="padding: 10px 20px;">My Rentals</a></li>
        <li class="u-nav-item" id="logout-link" style="display: none;">
            
            
            <div style="display: flex; align-items: center; gap: 15px;">
        
        <button id="logout-btn" class="u-border-none u-btn u-btn-round u-button-style u-hover-custom-color-1 u-palette-1-light-1 u-radius u-btn-1">
            Logout
        </button>
        <li class="u-nav-item" style="margin-left: 80px;">
        <button id="login-btn" class="u-border-none u-btn u-btn-round u-button-style u-hover-custom-color-1 u-palette-1-light-1 u-radius u-btn-1">
            Login
        </button>
        </li>
        <h5 id="welcome-message" class="u-text u-text-default u-text-1" style="margin: auto; font-size: 20px;"></h5>
    </div>
       <!--  <button id="logout-btn" class="u-border-none u-btn u-btn-round u-button-style u-hover-custom-color-1 u-palette-1-light-1 u-radius u-btn-1">
                Logout
            </button>
            
        </li>
        <li class="u-nav-item" style="margin-left: 80px;">
        <button id="login-btn" class="u-border-none u-btn u-btn-round u-button-style u-hover-custom-color-1 u-palette-1-light-1 u-radius u-btn-1">
             Login
            </button>
            </li>-->
          
    </ul>
    <!--<div id="user-info" style="display: none; margin-right: 500px; display: flex; align-items: center;">
    <h5 class="u-text u-text-default u-text-1" id="welcome-message"></h5>
    </div>-->
</nav>

                
</div></header>
    <section class="u-clearfix u-container-align-center u-image u-section-1" id="sec-9342" data-image-width="1728" data-image-height="972" >
      <div class="u-clearfix u-sheet u-sheet-1"></div>
    </section>
    <section class="u-clearfix u-container-align-center-lg u-container-align-center-md u-container-align-center-xl u-container-align-center-xs u-palette-1-light-3 u-section-2" id="carousel_0d8e" >
      <div class="u-clearfix u-sheet u-sheet-1">
        <h2 class="u-align-center u-custom-font u-text u-text-custom-color-1 u-text-default u-text-1" data-animation-name="customAnimationIn" data-animation-duration="1200" data-animation-delay="0">Rent your own bicycle </h2>
        <div class="u-expanded-width u-list u-list-1">
          <div class="u-repeater u-repeater-1" id="annonces-container-home">
            
          </div>
        </div>
      </div>
    </section>
    <!--  <section id="info-section" class="u-clearfix u-container-align-center-lg u-container-align-center-md u-container-align-center-xl u-container-align-center-xs u-palette-1-light-3 u-section-2" style="display: none;">
    -->
    
    
    <section id="info-section" class="u-clearfix u-container-align-center-xs u-palette-1-light-3 u-section-2" id="carousel_0d8e" style="display: none;">
      <div class="u-clearfix u-sheet u-sheet-1">
        <h2 class="u-align-center u-custom-font u-text u-text-custom-color-1 u-text-default u-text-1" data-animation-name="customAnimationIn" data-animation-duration="1200" data-animation-delay="0">Eiffel Corp application </h2>
        <br>
        <div class="u-expanded-width u-tab-links-align-justify u-tabs u-tabs-1" data-animation-name="customAnimationIn">
          <ul class="u-spacing-30 u-tab-list u-unstyled" role="tablist"><li class="u-tab-item" role="presentation"><a class="active u-active-palette-1-base u-button-style u-grey-5 u-hover-palette-1-base u-radius-10 u-tab-link u-text-active-white u-text-body-color u-text-hover-white u-tab-link-1" id="link-tab-fee0" href="#tab-fee0" role="tab" aria-controls="tab-fee0" aria-selected="true"> Bike Rental Service</a>
</li><li class="u-tab-item" role="presentation"><a class="u-active-palette-1-base u-button-style u-grey-5 u-hover-palette-1-base u-radius-10 u-tab-link u-text-active-white u-text-body-color u-text-hover-white u-tab-link-2" id="link-tab-4599" href="#tab-4599" role="tab" aria-controls="tab-4599" aria-selected="false"> Waiting List</a>
</li><li class="u-tab-item" role="presentation"><a class="u-active-palette-1-base u-button-style u-grey-5 u-hover-palette-1-base u-radius-10 u-tab-link u-text-active-white u-text-body-color u-text-hover-white u-tab-link-3" id="link-tab-3774" href="#tab-3774" role="tab" aria-controls="tab-3774" aria-selected="false"> Public Sales</a>
</li><li class="u-tab-item" role="presentation"><a class="u-active-palette-1-base u-button-style u-grey-5 u-hover-palette-1-base u-radius-10 u-tab-link u-text-active-white u-text-body-color u-text-hover-white u-tab-link-4" id="link-tab-90b5" href="#tab-90b5" role="tab" aria-controls="tab-90b5" aria-selected="false"> Global Payments</a>
</li></ul>
          <div class="u-tab-content">
            <div class="u-container-align-left u-container-style u-grey-5 u-tab-active u-tab-pane u-tab-pane-1" style="padding: 15px 15px;" data-animation-name="customAnimationIn" id="tab-fee0" role="tabpanel" aria-labelledby="link-tab-fee0">
              <div class="u-container-layout u-container-layout-1">
                <p class="u-align-left u-text u-text-default u-text-6"> Eiffel Bike Corp provides an efficient and easy-to-use bike rental service for students and employees of Gustave Eiffel University. Users can rent bikes from a pool that includes bikes offered by both the university and other members of the university community. They can also leave notes on the bikes they rent, sharing their feedback on bike conditions upon return. </p>
                <ul class="u-align-left u-custom-list u-text u-text-default u-text-6">
                  <li>
                    <div class="u-list-icon">
                      <div>✔</div>
                    </div>Convenient access to bikes for short-term rentals on campus.
                  </li>
                  <li>
                    <div class="u-list-icon">
                      <div>✔</div>
                    </div>Ability to leave feedback on bike conditions, ensuring a better experience for future users.
                  </li>
                  <li>
                    <div class="u-list-icon">
                      <div>✔</div>
                    </div>Easy bike selection with real-time availability updates for users within the university.
                  </li>
                  
                </ul>
              </div>
            </div>
            <div class="u-container-align-left u-container-style u-grey-5 u-tab-pane u-tab-pane-2" style="padding: 15px 15px;" id="tab-4599" role="tabpanel" aria-labelledby="link-tab-4599" wfd-invisible="true">
              <div class="u-container-layout u-valign-top u-container-layout-2">
                <p class="u-align-left u-text u-text-default u-text-6"> When a bike is unavailable, users can join a waiting list for the bike they wish to rent. The system follows a "first come, first served" principle, ensuring fairness in bike rentals. Once the bike becomes available, users are notified and can rent the bike immediately. </p>
                <ul class="u-align-left u-custom-list u-text u-text-default u-text-6">
                  <li>
                    <div class="u-list-icon">
                      <div>✔</div>
                    </div> Ensure you never miss the chance to rent a popular bike with an automatic notification system.
                  </li>
                  <li>
                    <div class="u-list-icon">
                      <div>✔</div>
                    </div>Transparent waiting list system based on the "first come, first served" principle.
                  </li>
                  <li>
                    <div class="u-list-icon">
                      <div>✔</div>
                    </div>Streamlined experience without having to constantly check availability.
                  </li>
                  
                </ul>
              </div>
            </div>
            <div class="u-container-align-left u-container-style u-grey-5 u-tab-pane u-tab-pane-3" style="padding: 15px 15px;" id="tab-3774" role="tabpanel" aria-labelledby="link-tab-3774" wfd-invisible="true">
              <div class="u-container-layout u-valign-top u-container-layout-3">
                <p class="u-align-left u-text u-text-default u-text-6"> Eiffel Bike Corp opens its bike rental service to the outside world with the launch of GustaveBikeService, a web platform that offers bikes for sale. Bikes that have been rented at least once through Eiffel Bike Corp are listed for sale. Customers can browse available bikes, check their prices, and add them to their basket for purchase. </p>
                <ul class="u-align-left u-custom-list u-text u-text-default u-text-6">
                  <li>
                    <div class="u-list-icon">
                      <div>✔</div>
                    </div> Access to a wider selection of bikes that have been tested and rated by the university community.
                  </li>
                  <li>
                    <div class="u-list-icon">
                      <div>✔</div>
                    </div>Ability to purchase bikes previously rented by students and employees, knowing their condition and feedback.
                  </li>
                  <li>
                    <div class="u-list-icon">
                      <div>✔</div>
                    </div>FConvenient online shopping experience with secure payment options.
                  </li>
                  
                </ul>
              </div>
            </div>
            <div class="u-container-align-left u-container-style u-grey-5 u-tab-pane u-tab-pane-4" style="padding: 15px 15px;" id="tab-90b5" role="tabpanel" aria-labelledby="link-tab-90b5" wfd-invisible="true">
              <div class="u-container-layout u-valign-top u-container-layout-4">
                <p class="u-align-left u-text u-text-default u-text-6"> GustaveBikeService supports international buyers by providing bike prices in any currency. To facilitate this, real-time exchange rates are integrated, allowing customers to view and pay for bikes in their preferred currency. For purchases, the platform connects with the Bank web service to verify available funds and process payments securely. </p>
                <ul class="u-align-left u-custom-list u-text u-text-default u-text-6">
                  <li>
                    <div class="u-list-icon">
                      <div>✔</div>
                    </div> Seamless global shopping experience with price conversion into any currency.
                  </li>
                  <li>
                    <div class="u-list-icon">
                      <div>✔</div>
                    </div>Secure payment processing with real-time verification of funds for international customers.
                  </li>
                  <li>
                    <div class="u-list-icon">
                      <div>✔</div>
                    </div>Convenience of paying in your local currency, avoiding complicated exchange processes.
                  </li>
                 
                </ul>
              </div>
            </div>
          </div>
        </div>
        <br>
        <br>
        <h2 class="u-align-center u-custom-font u-text u-text-custom-color-1 u-text-default u-text-1" data-animation-name="customAnimationIn" data-animation-duration="1200" data-animation-delay="0">Team Members</h2>
        <br>
        <div class="u-expanded-width u-layout-horizontal u-list u-list-1" style="padding: auto;  margin-bottom:auto;">
          <div class="u-repeater u-repeater-1" style="padding: auto;  margin-bottom:auto;" >
            <div class="u-container-align-center u-container-style u-list-item u-repeater-item u-shape-rectangle u-white u-list-item-1" style="padding: auto;  margin-bottom:1000px;" data-animation-name="customAnimationIn" data-animation-duration="1000" data-animation-delay="500">
              <div class="u-container-layout u-similar-container u-valign-top u-container-layout-5">
                <img alt="" class="u-expanded-width u-image u-image-default u-image-1" style="width: 1000px; height: 500px;"data-image-width="638" data-image-height="780" src="css/images/aziz.png" data-animation-name="customAnimationIn" data-animation-duration="1250" data-animation-delay="250">
                <h6 class="u-align-center u-text u-text-default u-text-13" data-animation-name="" data-animation-duration="0" data-animation-delay="0" data-animation-direction="">Mohamed Aziz Loukil</h4>
                <!--<p class="u-align-center u-large-text u-text u-text-default u-text-variant u-text-14"> Automotive Technician</p>-->
              </div>
            </div>
            <div class="u-container-align-center u-container-style u-list-item u-repeater-item u-shape-rectangle u-video-cover u-white u-list-item-2" style="padding: auto;  margin-bottom:1000px;" data-animation-name="customAnimationIn" data-animation-duration="1000" data-animation-delay="500">
              <div class="u-container-layout u-similar-container u-valign-top u-container-layout-6">
                <img alt="" class="u-expanded-width u-image u-image-default u-image-2" style="width: 1000px; height: 500px;"data-image-width="638" data-image-height="780" src="css/images/amine.png" data-animation-name="customAnimationIn" data-animation-duration="1250" data-animation-delay="250">
                <h6 class="u-align-center u-text u-text-default u-text-13" data-animation-name="" data-animation-duration="0" data-animation-delay="0" data-animation-direction="">Mohamed Amine Tlili</h4>
                <!--<p class="u-align-center u-large-text u-text u-text-default u-text-variant u-text-14"> Maintenance Mechanic</p>-->
              </div>
            </div>
            <div class="u-container-align-center u-container-style u-list-item u-repeater-item u-shape-rectangle u-video-cover u-white u-list-item-3" style="padding: auto;  margin-bottom:1000px;" data-animation-name="customAnimationIn" data-animation-duration="1000" data-animation-delay="500">
              <div class="u-container-layout u-similar-container u-valign-top u-container-layout-7">
                <img alt="" class="u-expanded-width u-image u-image-default u-image-3" style="width: 1000px; height: 500px;"data-image-width="638" data-image-height="780" src="css/images/mohamed.jpg" data-animation-name="customAnimationIn" data-animation-duration="1250" data-animation-delay="250">
                <h6 class="u-align-center u-text u-text-default u-text-13" style="display: center;"data-animation-name="" data-animation-duration="0" data-animation-delay="0" data-animation-direction="">Mohamed Laatar</h4>
                <!--<p class="u-align-center u-large-text u-text u-text-default u-text-variant u-text-14"> Diesel Mechanic</p>-->
              </div>
            </div>
            
            
         
          </div>
          
        </div>
      </div>
    
    
    
    
    
    
    
    
    
    
    
    
    <!--  <div class="info-content">
        <h1>Welcome to Our Application</h1>
        <p>
            Discover a world of features designed to simplify your experience. 
            Manage your rentals, sales, and much more with ease!
        </p>
        <div class="info-buttons">
            <button class="btn learn-more">Learn More</button>
            <button class="btn get-started">Get Started</button>
        </div>
    </div>-->
</section>
    
    <script>
   
    document.addEventListener('DOMContentLoaded', () => {
        // Safely retrieve user data from session storage
        const userDataJson = sessionStorage.getItem("userData");
        let userData = null;

        try {
            userData = JSON.parse(userDataJson);
        } catch (error) {
            console.error("Error parsing user data:", error);
        }
        const rentsection1 = document.getElementById('sec-9342');
        const rentsection2 = document.getElementById('carousel_0d8e');
        const infosection = document.getElementById('info-section');
        
        if (userData) {
            console.log("User data found in session:", userData);
            const loginBtn = document.getElementById('login-btn');
            const logoutBtn = document.getElementById('logout-link');
            const profileLink = document.getElementById('profile-link');
            const postsLink = document.getElementById('posts-link');
            const bikesLink = document.getElementById('Bikes-link');
            const rentalsLink = document.getElementById('rentals-link');
            const homeLink = document.getElementById('home-link');
            const welcomeMessage = document.getElementById('welcome-message');

            if (loginBtn) loginBtn.style.display = 'none';
            if (logoutBtn) logoutBtn.style.display = 'block';

            // Safely access and update DOM elements
            if (userData.role === "CLIENT") {
            if (homeLink) homeLink.style.display = 'none';
            if (profileLink) profileLink.style.display = 'none';
            if (postsLink) postsLink.style.display = 'none';
            if (bikesLink) bikesLink.style.display = 'none';
            if (rentalsLink) rentalsLink.style.display = 'none';
        } else {
            // For other roles, show all links
            if (homeLink) homeLink.style.display = 'block';
            if (profileLink) profileLink.style.display = 'block';
            if (postsLink) postsLink.style.display = 'block';
            if (bikesLink) bikesLink.style.display = 'block';
            if (rentalsLink) rentalsLink.style.display = 'block';
        }
            if (welcomeMessage) welcomeMessage.textContent = `Welcome ${userData.first_name}`;
            
            fetch( `http://localhost:8081/UserWebService/api/annonces/` 
    		)
    .then(response => {
        if (!response.ok) {
            throw new Error("Failed to fetch annonces.");
        }
        return response.json();
    })
    .then(annonces => {
        displayAnnoncesHome(annonces);
    })
    .catch(error => {
        console.error("Error fetching annonces:", error);
        document.getElementById('annonces-container-home').innerHTML = `
            <p style="color: red;">Unable to load your posts. Please try again later.</p>
            `;
    });
            
        } else {
        	if (infosection) infosection.style.display = 'block';
        	if (rentsection1) rentsection1.style.display = 'block';
        	if (rentsection2) rentsection2.style.display = 'none';
            console.log("No user data found in session.");
        }

        // Handle login button click
        const loginButton = document.getElementById('login-btn');
        if (loginButton) {
            loginButton.addEventListener('click', () => {
                window.location.href = "Login-Page.html";
            });
        }
        const logoutButton = document.getElementById('logout-btn');
        if (logoutButton) {
            logoutButton.addEventListener('click', () => {
                
                sessionStorage.clear();
                localStorage.clear();   
                
                window.location.href = "Login-Page.html";
            });
        }

    });
    function displayAnnoncesHome(annonces) {
        const container = document.getElementById('annonces-container-home');
        container.innerHTML = ''; // Clear existing content

        if (annonces.length === 0) {
            container.innerHTML = '<p>No posts found.</p>';
            return;
        }

        annonces.forEach(annonce => {
            const userDataJson = sessionStorage.getItem("userData");
            let userData = null;

            try {
                userData = JSON.parse(userDataJson);
            } catch (error) {
                console.error("Error parsing user data:", error);
            }

            if (userData) {
                if (annonce.userid === userData.id) {
                    return;
                }
                

                let additionalInfo = "";
                fetch(`http://localhost:8081/UserWebService/api/users/${annonce.userid}`)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error("Failed to fetch username.");
                        }
                        return response.json();
                    })
                    .then(user => {
                        const username = user.last_name;

                        if ("rentPrice" in annonce) {
                            additionalInfo = `
                                <h4 class="u-align-center u-text u-text-palette-1-base u-text-3">${annonce.rentPrice} €/h</h4>
                                <p class="u-align-center u-text u-text-4"><strong>${annonce.bike.condition}</strong> ${annonce.bike.model} | ${annonce.bike.brand} | ${annonce.bike.color}</p>
                                <p class="u-align-center u-text u-text-5">
                                    <span class="u-file-icon u-icon u-icon-1">
                                        <img src="css/images/1584892.png" alt="" style="width: 20px; height: 20px; margin-bottom: 8px">
                                    </span>&nbsp;Rent Time: ${annonce.start_time} - ${annonce.end_time}
                                </p>`;
                        }

                        const imageUrl = annonce.bike.images && annonce.bike.images.length > 0
                            ? annonce.bike.images[0]
                            : 'http://localhost:8081/UserWebService/css/images/imagevelo.jpg';

                        const annonceHTML = `
                            <div class="u-list-item u-radius u-repeater-item u-shape-round u-white u-list-item-1" style="padding: auto;  margin-bottom:auto;" data-animation-name="customAnimationIn" data-animation-duration="1500" data-animation-delay="200">
                                <div class="u-container-layout u-similar-container u-container-layout-1">
                                    <img src="${imageUrl}" alt="" class="u-expanded-width u-image u-image-round u-radius u-image-1" data-image-width="1067" data-image-height="800">
                                    <h5 class="u-align-center u-text u-text-2">${annonce.title}</h5>
                                    <p class="u-align-center u-text u-text-4">${annonce.description}</p>
                                    ${additionalInfo}
                                    <blockquote class="u-align-center u-indent-9 u-text u-text-6" style="font-size: 12px; margin-bottom: 10px; color: #888;">Posted By ${username} ends in ${annonce.duration} days</blockquote>
                                    <div style="display: flex; justify-content: center; align-items: center; margin-bottom: 10px;">
                                        <a href="#" onclick="RentBike(${annonce.id})" class="u-active-white u-align-center u-border-2 u-border-active-palette-1-base u-border-hover-palette-1-base u-border-palette-1-base u-btn u-btn-round u-button-style u-hover-white u-palette-1-base u-radius u-text-active-black u-text-body-alt-color u-text-hover-black u-btn-1" style="margin: 2px; margin-right: 5px padding: 10px 5px;" data-animation-name="" data-animation-duration="0" data-animation-delay="0" data-animation-direction="">Rent Bike</a>
                                        <a href="#" onclick="viewNotes(${annonce.id})" class="u-active-white u-align-center u-border-2 u-border-active-palette-1-base u-border-hover-palette-1-base u-border-palette-1-base u-btn u-btn-round u-button-style u-hover-white u-palette-1-base u-radius u-text-active-black u-text-body-alt-color u-text-hover-black u-btn-1" style="margin: 2px; margin-left: 5px; padding: 10px 5px;">View Notes</a>
                                    </div>
                                </div>
                            </div>
                        `;

                        container.innerHTML += annonceHTML;
                    })
                    .catch(error => {
                        console.error("Error fetching username:", error);
                    });
            }
        });
    }

    function viewNotes(annonceId) {
        fetch( ` http://localhost:8081/UserWebService/api/annonces/${annonceId}/notes `
        		)
            .then(response => {
                if (!response.ok) {
                    throw new Error("Failed to fetch notes.");
                }
                return response.json();
            })
            .then(notes => {
                let popupHTML = "";
                if (!Array.isArray(notes)) {
        	        notes = []; // Initialize as an empty array if undefined
        	    }
                // Check if notes list is empty
                if (notes.length === 0) {
                    popupHTML = `
                        <div class="popup">
                            <div class="popup-content">
                                <h3>Post Comments</h3>
                                <p>There are no comments on this post.</p>
                                <button onclick="closePopup()">Close</button>
                            </div>
                        </div>
                    `;
                } else {
                    // If notes exist, display them
                    const notesList = notes.map(note => `
                        <li>
                            <strong>${note.username}:</strong> ${note.comment}<br>
                        </li>
                    `).join("");

                    popupHTML = `
                        <div class="popup">
                            <div class="popup-content">
                                <h3>Post Comments</h3>
                                <ul>${notesList}</ul>
                                <button onclick="closePopup()">Close</button>
                            </div>
                        </div>
                    `;
                }

                document.body.insertAdjacentHTML("beforeend", popupHTML);
            })
            .catch(error => {
                console.error("Error fetching notes:", error);
                alert("Error fetching notes.");
            });
    }

    // Close the popup
    function closePopup() {
        const popup = document.querySelector(".popup");
        if (popup) {
            popup.remove();  // Removes the popup from the DOM
        }
    }


    function RentBike(postId) {
        const userDataJson = sessionStorage.getItem("userData");
        if (!userDataJson) {
            alert("No user data found. Please log in.");
            return;
        }

        const userData = JSON.parse(userDataJson);

        // Check if the user has already rented the bike or is in their rentals list in session storage
        if (userData.rentals && userData.rentals.includes(postId)) {
            showPopup("You have already rented this bike or are in the waiting list.");
            return;
        }

        // Send a POST request to add the user to the waiting list or rent the bike
        fetch(`http://localhost:8081/UserWebService/api/rentals/${postId}/waiting-list`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(userData),
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error("Failed to process rental request.");
                }
                return response.text();
            })
            .then(message => {
                console.log(message);
                alert(message);

                // Update rentals list if the bike was successfully rented or the user was added to the waiting list
                if (message.includes("successfully rented") || message.includes("added to the waiting list")) {
                    if (!Array.isArray(userData.rentals)) {
                        userData.rentals = [];
                    }

                    // Add the bike ID to the user's rentals list in sessionStorage
                    userData.rentals.push(postId);
                    sessionStorage.setItem("userData", JSON.stringify(userData));
                }
            })
            .catch(error => {
                console.error("Error:", error);
                alert("Error: " + error.message);
            });
    }


 // Function to display popup message
    function showPopup(message) {
        const popupHTML = `
            <div class="popup">
                <div class="popup-content">
                    <h3>${message}</h3>
                    <button onclick="closePopup2()">Close</button>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML("beforeend", popupHTML);
    }

    // Function to close the popup
    function closePopup2() {
        const popup = document.querySelector('.popup');
        if (popup) {
            popup.remove();
        }
    }
    
</script>
<script>
    // Simulating user authentication state
    const isUserConnected = false; // Change to true when the user is connected

    document.addEventListener("DOMContentLoaded", () => {
        const infoSection = document.getElementById("info-section");
        if (isUserConnected) {
            infoSection.style.display = "none";
        }
    });
</script>

    
    <footer class="u-align-center u-clearfix u-container-align-center u-custom-color-1 u-footer u-footer" id="sec-5467"><div class="u-clearfix u-sheet u-sheet-1">
        <p class="u-small-text u-text u-text-variant u-text-1">© Developed By Eiffel Corp.</p>
      </div></footer>
   
  
</body></html>